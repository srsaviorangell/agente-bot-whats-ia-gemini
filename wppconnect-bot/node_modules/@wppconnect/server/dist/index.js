"use strict";var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(exports, "__esModule", { value: true });exports.initServer = initServer;exports.logger = void 0;















var _wppconnect = require("@wppconnect-team/wppconnect");
var _cors = _interopRequireDefault(require("cors"));
var _express = _interopRequireDefault(require("express"));
var _expressQueryBoolean = _interopRequireDefault(require("express-query-boolean"));
var _http = require("http");
var _mergeDeep = _interopRequireDefault(require("merge-deep"));
var _process = _interopRequireDefault(require("process"));
var _socket = require("socket.io");


var _package = require("../package.json");
var _config = _interopRequireDefault(require("./config"));
var _index = require("./mapper/index");
var _routes = _interopRequireDefault(require("./routes"));

var _functions = require("./util/functions");




var _logger = require("./util/logger"); /*
 * Copyright 2021 WPPConnect Team
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ //require('dotenv').config();
const logger = exports.logger = (0, _logger.createLogger)(_config.default.log);function initServer(serverOptions) {if (typeof serverOptions !== 'object') {serverOptions = {};}serverOptions = (0, _mergeDeep.default)({}, _config.default, serverOptions);
  _wppconnect.defaultLogger.level = serverOptions?.log?.level ?
  serverOptions.log.level :
  'silly';

  (0, _functions.setMaxListners)(serverOptions);

  const app = (0, _express.default)();
  const PORT = _process.default.env.PORT || serverOptions.port;

  app.use((0, _cors.default)());
  app.use(_express.default.json({ limit: '50mb' }));
  app.use(_express.default.urlencoded({ limit: '50mb', extended: true }));
  app.use('/files', _express.default.static('WhatsAppImages'));
  app.use((0, _expressQueryBoolean.default)());

  if (_config.default?.aws_s3?.access_key_id && _config.default?.aws_s3?.secret_key) {
    _process.default.env['AWS_ACCESS_KEY_ID'] = _config.default.aws_s3.access_key_id;
    _process.default.env['AWS_SECRET_ACCESS_KEY'] = _config.default.aws_s3.secret_key;
  }

  // Add request options
  app.use((req, res, next) => {
    req.serverOptions = serverOptions;
    req.logger = logger;
    req.io = io;

    const oldSend = res.send;

    res.send = async function (data) {
      const content = req.headers['content-type'];
      if (content == 'application/json') {
        data = JSON.parse(data);
        if (!data.session) data.session = req.client ? req.client.session : '';
        if (data.mapper && req.serverOptions.mapper.enable) {
          data.response = await (0, _index.convert)(
            req.serverOptions.mapper.prefix,
            data.response,
            data.mapper
          );
          delete data.mapper;
        }
      }
      res.send = oldSend;
      return res.send(data);
    };
    next();
  });

  app.use(_routes.default);

  (0, _functions.createFolders)();
  const http = (0, _http.createServer)(app);
  const io = new _socket.Server(http, {
    cors: {
      origin: '*'
    }
  });

  io.on('connection', (sock) => {
    logger.info(`ID: ${sock.id} entrou`);

    sock.on('disconnect', () => {
      logger.info(`ID: ${sock.id} saiu`);
    });
  });

  http.listen(PORT, () => {
    logger.info(`Server is running on port: ${PORT}`);
    logger.info(
      `\x1b[31m Visit ${serverOptions.host}:${PORT}/api-docs for Swagger docs`
    );
    logger.info(`WPPConnect-Server version: ${_package.version}`);

    if (serverOptions.startAllSession) (0, _functions.startAllSessions)(serverOptions, logger);
  });

  if (_config.default.log.level === 'error' || _config.default.log.level === 'warn') {
    console.log(`\x1b[33m ======================================================
Attention:
Your configuration is configured to show only a few logs, before opening an issue, 
please set the log to 'silly', copy the log that shows the error and open your issue.
======================================================
`);
  }

  return {
    app,
    routes: _routes.default,
    logger
  };
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfd3BwY29ubmVjdCIsInJlcXVpcmUiLCJfY29ycyIsIl9pbnRlcm9wUmVxdWlyZURlZmF1bHQiLCJfZXhwcmVzcyIsIl9leHByZXNzUXVlcnlCb29sZWFuIiwiX2h0dHAiLCJfbWVyZ2VEZWVwIiwiX3Byb2Nlc3MiLCJfc29ja2V0IiwiX3BhY2thZ2UiLCJfY29uZmlnIiwiX2luZGV4IiwiX3JvdXRlcyIsIl9mdW5jdGlvbnMiLCJfbG9nZ2VyIiwibG9nZ2VyIiwiZXhwb3J0cyIsImNyZWF0ZUxvZ2dlciIsImNvbmZpZyIsImxvZyIsImluaXRTZXJ2ZXIiLCJzZXJ2ZXJPcHRpb25zIiwibWVyZ2VEZWVwIiwiZGVmYXVsdExvZ2dlciIsImxldmVsIiwic2V0TWF4TGlzdG5lcnMiLCJhcHAiLCJleHByZXNzIiwiUE9SVCIsInByb2Nlc3MiLCJlbnYiLCJwb3J0IiwidXNlIiwiY29ycyIsImpzb24iLCJsaW1pdCIsInVybGVuY29kZWQiLCJleHRlbmRlZCIsInN0YXRpYyIsImJvb2xQYXJzZXIiLCJhd3NfczMiLCJhY2Nlc3Nfa2V5X2lkIiwic2VjcmV0X2tleSIsInJlcSIsInJlcyIsIm5leHQiLCJpbyIsIm9sZFNlbmQiLCJzZW5kIiwiZGF0YSIsImNvbnRlbnQiLCJoZWFkZXJzIiwiSlNPTiIsInBhcnNlIiwic2Vzc2lvbiIsImNsaWVudCIsIm1hcHBlciIsImVuYWJsZSIsInJlc3BvbnNlIiwiY29udmVydCIsInByZWZpeCIsInJvdXRlcyIsImNyZWF0ZUZvbGRlcnMiLCJodHRwIiwiY3JlYXRlU2VydmVyIiwiU29ja2V0Iiwib3JpZ2luIiwib24iLCJzb2NrIiwiaW5mbyIsImlkIiwibGlzdGVuIiwiaG9zdCIsInZlcnNpb24iLCJzdGFydEFsbFNlc3Npb24iLCJzdGFydEFsbFNlc3Npb25zIiwiY29uc29sZSJdLCJzb3VyY2VzIjpbIi4uL3NyYy9pbmRleC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKlxuICogQ29weXJpZ2h0IDIwMjEgV1BQQ29ubmVjdCBUZWFtXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7IGRlZmF1bHRMb2dnZXIgfSBmcm9tICdAd3BwY29ubmVjdC10ZWFtL3dwcGNvbm5lY3QnO1xuaW1wb3J0IGNvcnMgZnJvbSAnY29ycyc7XG5pbXBvcnQgZXhwcmVzcywgeyBFeHByZXNzLCBOZXh0RnVuY3Rpb24sIFJvdXRlciB9IGZyb20gJ2V4cHJlc3MnO1xuaW1wb3J0IGJvb2xQYXJzZXIgZnJvbSAnZXhwcmVzcy1xdWVyeS1ib29sZWFuJztcbmltcG9ydCB7IGNyZWF0ZVNlcnZlciB9IGZyb20gJ2h0dHAnO1xuaW1wb3J0IG1lcmdlRGVlcCBmcm9tICdtZXJnZS1kZWVwJztcbmltcG9ydCBwcm9jZXNzIGZyb20gJ3Byb2Nlc3MnO1xuaW1wb3J0IHsgU2VydmVyIGFzIFNvY2tldCB9IGZyb20gJ3NvY2tldC5pbyc7XG5pbXBvcnQgeyBMb2dnZXIgfSBmcm9tICd3aW5zdG9uJztcblxuaW1wb3J0IHsgdmVyc2lvbiB9IGZyb20gJy4uL3BhY2thZ2UuanNvbic7XG5pbXBvcnQgY29uZmlnIGZyb20gJy4vY29uZmlnJztcbmltcG9ydCB7IGNvbnZlcnQgfSBmcm9tICcuL21hcHBlci9pbmRleCc7XG5pbXBvcnQgcm91dGVzIGZyb20gJy4vcm91dGVzJztcbmltcG9ydCB7IFNlcnZlck9wdGlvbnMgfSBmcm9tICcuL3R5cGVzL1NlcnZlck9wdGlvbnMnO1xuaW1wb3J0IHtcbiAgY3JlYXRlRm9sZGVycyxcbiAgc2V0TWF4TGlzdG5lcnMsXG4gIHN0YXJ0QWxsU2Vzc2lvbnMsXG59IGZyb20gJy4vdXRpbC9mdW5jdGlvbnMnO1xuaW1wb3J0IHsgY3JlYXRlTG9nZ2VyIH0gZnJvbSAnLi91dGlsL2xvZ2dlcic7XG5cbi8vcmVxdWlyZSgnZG90ZW52JykuY29uZmlnKCk7XG5cbmV4cG9ydCBjb25zdCBsb2dnZXIgPSBjcmVhdGVMb2dnZXIoY29uZmlnLmxvZyk7XG5cbmV4cG9ydCBmdW5jdGlvbiBpbml0U2VydmVyKHNlcnZlck9wdGlvbnM6IFBhcnRpYWw8U2VydmVyT3B0aW9ucz4pOiB7XG4gIGFwcDogRXhwcmVzcztcbiAgcm91dGVzOiBSb3V0ZXI7XG4gIGxvZ2dlcjogTG9nZ2VyO1xufSB7XG4gIGlmICh0eXBlb2Ygc2VydmVyT3B0aW9ucyAhPT0gJ29iamVjdCcpIHtcbiAgICBzZXJ2ZXJPcHRpb25zID0ge307XG4gIH1cblxuICBzZXJ2ZXJPcHRpb25zID0gbWVyZ2VEZWVwKHt9LCBjb25maWcsIHNlcnZlck9wdGlvbnMpO1xuICBkZWZhdWx0TG9nZ2VyLmxldmVsID0gc2VydmVyT3B0aW9ucz8ubG9nPy5sZXZlbFxuICAgID8gc2VydmVyT3B0aW9ucy5sb2cubGV2ZWxcbiAgICA6ICdzaWxseSc7XG5cbiAgc2V0TWF4TGlzdG5lcnMoc2VydmVyT3B0aW9ucyBhcyBTZXJ2ZXJPcHRpb25zKTtcblxuICBjb25zdCBhcHAgPSBleHByZXNzKCk7XG4gIGNvbnN0IFBPUlQgPSBwcm9jZXNzLmVudi5QT1JUIHx8IHNlcnZlck9wdGlvbnMucG9ydDtcblxuICBhcHAudXNlKGNvcnMoKSk7XG4gIGFwcC51c2UoZXhwcmVzcy5qc29uKHsgbGltaXQ6ICc1MG1iJyB9KSk7XG4gIGFwcC51c2UoZXhwcmVzcy51cmxlbmNvZGVkKHsgbGltaXQ6ICc1MG1iJywgZXh0ZW5kZWQ6IHRydWUgfSkpO1xuICBhcHAudXNlKCcvZmlsZXMnLCBleHByZXNzLnN0YXRpYygnV2hhdHNBcHBJbWFnZXMnKSk7XG4gIGFwcC51c2UoYm9vbFBhcnNlcigpKTtcblxuICBpZiAoY29uZmlnPy5hd3NfczM/LmFjY2Vzc19rZXlfaWQgJiYgY29uZmlnPy5hd3NfczM/LnNlY3JldF9rZXkpIHtcbiAgICBwcm9jZXNzLmVudlsnQVdTX0FDQ0VTU19LRVlfSUQnXSA9IGNvbmZpZy5hd3NfczMuYWNjZXNzX2tleV9pZDtcbiAgICBwcm9jZXNzLmVudlsnQVdTX1NFQ1JFVF9BQ0NFU1NfS0VZJ10gPSBjb25maWcuYXdzX3MzLnNlY3JldF9rZXk7XG4gIH1cblxuICAvLyBBZGQgcmVxdWVzdCBvcHRpb25zXG4gIGFwcC51c2UoKHJlcTogYW55LCByZXM6IGFueSwgbmV4dDogTmV4dEZ1bmN0aW9uKSA9PiB7XG4gICAgcmVxLnNlcnZlck9wdGlvbnMgPSBzZXJ2ZXJPcHRpb25zO1xuICAgIHJlcS5sb2dnZXIgPSBsb2dnZXI7XG4gICAgcmVxLmlvID0gaW8gYXMgYW55O1xuXG4gICAgY29uc3Qgb2xkU2VuZCA9IHJlcy5zZW5kO1xuXG4gICAgcmVzLnNlbmQgPSBhc3luYyBmdW5jdGlvbiAoZGF0YTogYW55KSB7XG4gICAgICBjb25zdCBjb250ZW50ID0gcmVxLmhlYWRlcnNbJ2NvbnRlbnQtdHlwZSddO1xuICAgICAgaWYgKGNvbnRlbnQgPT0gJ2FwcGxpY2F0aW9uL2pzb24nKSB7XG4gICAgICAgIGRhdGEgPSBKU09OLnBhcnNlKGRhdGEpO1xuICAgICAgICBpZiAoIWRhdGEuc2Vzc2lvbikgZGF0YS5zZXNzaW9uID0gcmVxLmNsaWVudCA/IHJlcS5jbGllbnQuc2Vzc2lvbiA6ICcnO1xuICAgICAgICBpZiAoZGF0YS5tYXBwZXIgJiYgcmVxLnNlcnZlck9wdGlvbnMubWFwcGVyLmVuYWJsZSkge1xuICAgICAgICAgIGRhdGEucmVzcG9uc2UgPSBhd2FpdCBjb252ZXJ0KFxuICAgICAgICAgICAgcmVxLnNlcnZlck9wdGlvbnMubWFwcGVyLnByZWZpeCxcbiAgICAgICAgICAgIGRhdGEucmVzcG9uc2UsXG4gICAgICAgICAgICBkYXRhLm1hcHBlclxuICAgICAgICAgICk7XG4gICAgICAgICAgZGVsZXRlIGRhdGEubWFwcGVyO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXMuc2VuZCA9IG9sZFNlbmQ7XG4gICAgICByZXR1cm4gcmVzLnNlbmQoZGF0YSk7XG4gICAgfTtcbiAgICBuZXh0KCk7XG4gIH0pO1xuXG4gIGFwcC51c2Uocm91dGVzKTtcblxuICBjcmVhdGVGb2xkZXJzKCk7XG4gIGNvbnN0IGh0dHAgPSBjcmVhdGVTZXJ2ZXIoYXBwKTtcbiAgY29uc3QgaW8gPSBuZXcgU29ja2V0KGh0dHAsIHtcbiAgICBjb3JzOiB7XG4gICAgICBvcmlnaW46ICcqJyxcbiAgICB9LFxuICB9KTtcblxuICBpby5vbignY29ubmVjdGlvbicsIChzb2NrKSA9PiB7XG4gICAgbG9nZ2VyLmluZm8oYElEOiAke3NvY2suaWR9IGVudHJvdWApO1xuXG4gICAgc29jay5vbignZGlzY29ubmVjdCcsICgpID0+IHtcbiAgICAgIGxvZ2dlci5pbmZvKGBJRDogJHtzb2NrLmlkfSBzYWl1YCk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGh0dHAubGlzdGVuKFBPUlQsICgpID0+IHtcbiAgICBsb2dnZXIuaW5mbyhgU2VydmVyIGlzIHJ1bm5pbmcgb24gcG9ydDogJHtQT1JUfWApO1xuICAgIGxvZ2dlci5pbmZvKFxuICAgICAgYFxceDFiWzMxbSBWaXNpdCAke3NlcnZlck9wdGlvbnMuaG9zdH06JHtQT1JUfS9hcGktZG9jcyBmb3IgU3dhZ2dlciBkb2NzYFxuICAgICk7XG4gICAgbG9nZ2VyLmluZm8oYFdQUENvbm5lY3QtU2VydmVyIHZlcnNpb246ICR7dmVyc2lvbn1gKTtcblxuICAgIGlmIChzZXJ2ZXJPcHRpb25zLnN0YXJ0QWxsU2Vzc2lvbikgc3RhcnRBbGxTZXNzaW9ucyhzZXJ2ZXJPcHRpb25zLCBsb2dnZXIpO1xuICB9KTtcblxuICBpZiAoY29uZmlnLmxvZy5sZXZlbCA9PT0gJ2Vycm9yJyB8fCBjb25maWcubG9nLmxldmVsID09PSAnd2FybicpIHtcbiAgICBjb25zb2xlLmxvZyhgXFx4MWJbMzNtID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuQXR0ZW50aW9uOlxuWW91ciBjb25maWd1cmF0aW9uIGlzIGNvbmZpZ3VyZWQgdG8gc2hvdyBvbmx5IGEgZmV3IGxvZ3MsIGJlZm9yZSBvcGVuaW5nIGFuIGlzc3VlLCBcbnBsZWFzZSBzZXQgdGhlIGxvZyB0byAnc2lsbHknLCBjb3B5IHRoZSBsb2cgdGhhdCBzaG93cyB0aGUgZXJyb3IgYW5kIG9wZW4geW91ciBpc3N1ZS5cbj09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuYCk7XG4gIH1cblxuICByZXR1cm4ge1xuICAgIGFwcCxcbiAgICByb3V0ZXMsXG4gICAgbG9nZ2VyLFxuICB9O1xufVxuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7O0FBZ0JBLElBQUFBLFdBQUEsR0FBQUMsT0FBQTtBQUNBLElBQUFDLEtBQUEsR0FBQUMsc0JBQUEsQ0FBQUYsT0FBQTtBQUNBLElBQUFHLFFBQUEsR0FBQUQsc0JBQUEsQ0FBQUYsT0FBQTtBQUNBLElBQUFJLG9CQUFBLEdBQUFGLHNCQUFBLENBQUFGLE9BQUE7QUFDQSxJQUFB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